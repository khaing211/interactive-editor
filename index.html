<!doctype html>
<html>
    <head>
        <title>IEditor - Interactive Javascript Editor</title>
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="lib/codemirror/lib/codemirror.css">
        <link rel="stylesheet" href="css/style.css">
		<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.19.custom.css" rel="stylesheet" />
        <script src="lib/codemirror/lib/codemirror.js"></script>
        <script src="lib/codemirror/mode/javascript/javascript.js"></script>
		<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script src="lib/ieditor/util.js"></script>
        <script src="lib/esprima/esprima.js"></script>
        <script src="lib/ieditor/ajax.js"></script>
        <script src="lib/ieditor/sandbox.js"></script>
        <script src="lib/ieditor/tracer.js"></script>
        <script src="lib/ieditor/format.js"></script>
        <script src="lib/ieditor/ieditor.js"></script>
        <script src="lib/ieditor/system.js"></script>
		<script type="text/javascript" src="js/jquery-ui-1.8.19.custom.min.js"></script>
        <style type="text/css">
            .ui-slider-horizontal .ui-state-default {
                background: white url(img/slider/bot.png) no-repeat scroll 50% 50%;
            }
            .ui-slider .ui-slider-handle {
                width: 2em;
                height: 1.5em;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="span12" style="text-align:center">
                    <img src="img/iEditor.png" alt="iEditor" width="80%" height="80%" />
                </div>
            </div>
            <div class="row" style="margin: 5px 0;">
                <div class="span12">
                    <div class="span5">
                        <h6 class="span2">Choose Language:</h6>
                        <select name="language" id="language" style="margin:0;position:relative;top:-5px;">
                            <option value="1">Javascript</option>
                            <option value="2">PHP</option>
                            <option value="3">Ruby</option>
                            <option value="4">Python</option>
                        </select>
                    </div>
                    <div class="span2" style="text-align:right;">
                        <h6>History Timeline: </h6>
                    </div>
                    <div class="span4">
                        <div id="slider"></div>
                    </div>
                </div>
            </div>
        </div>
        <form action="">
            <textarea id="editor" name="code">// Type your code here</textarea>
            <textarea id="terminal" name="terminal">// Type your code here</textarea>
        </form>
        <script>
            IEditor("editor","terminal", "system");
            //Added scrollbar
            // Preloading the images used for the slider handle
            $(document).ready(function(){
                (function(){
                    var cachedObj = $('#slider'),
                    startIndex = 100;
                    cachedObj.slider({
                        change: function(event, ui) {
                            console.log(ui.value);
                            var curIndex = ui.value,
                            sIndex = startIndex,
                            snapshotSize = Format.getSnapshotSize(),
                            x = Math.round((snapshotSize / 100) * curIndex);
                            if (curIndex > startIndex) {
                                // call forward
                                console.log('call forward');
                                console.log('x: ' + x);
                                Format.forward(x);
                            } else if(curIndex < startIndex) {
                                // call rewrind
                                console.log('call rewind');
                                console.log('x: ' + x);
                                Format.rewind(x);
                            }
                        },
                        start: function(event, ui) {
                            console.log(ui.value);
                            startIndex = ui.value;
                        }

                    });
                    cachedObj.slider("value", startIndex); // default value is 100
                    cachedObj.slider("enable");    // disable it
                })();
            });
        </script>
    </body>
</html>
